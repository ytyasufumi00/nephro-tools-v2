import streamlit as st

# ------------------------------------------------------------------
# 1. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒ¼ã‚¿ï¼ˆå†…å®¹ã‚’å¤§å¹…ã«æ‹¡å……ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ä»•æ§˜åŒ–ï¼‰
# ------------------------------------------------------------------
ICLS_CONTENT = {
    "â¤ï¸ BLS": [
        {
            "title": "è³ªã®é«˜ã„CPR",
            "points": [
                "æ·±ã•: 5cmä»¥ä¸Šï¼ˆç´„5-6cmï¼‰",
                "ãƒ†ãƒ³ãƒ: 100-120å›/åˆ†",
                "ãƒªã‚³ã‚¤ãƒ«: å®Œå…¨ã«åœ§è§£é™¤ï¼ˆå¿ƒè‡“ã«è¡€ã‚’æˆ»ã™ï¼‰",
                "ä¸­æ–­: 10ç§’ä»¥å†…ï¼ˆèƒ¸éª¨åœ§è¿«æ¯”ç‡ CCF > 60-80%ç›®æ¨™ï¼‰",
                "äº¤ä»£: 2åˆ†ã”ã¨ï¼ˆç–²åŠ´ãŒè¦‹ãˆã‚‹å‰ã«äº¤ä»£ï¼‰"
            ]
        },
        {
            "title": "ãƒãƒƒã‚¯ãƒãƒ«ãƒ–ãƒã‚¹ã‚¯ (BVM)",
            "points": [
                "ECæ³•ï¼ˆç‰‡æ‰‹ï¼‰ / VEæ³•ï¼ˆä¸¡æ‰‹ãƒ»æ¨å¥¨ï¼‰",
                "æ›æ°—é‡: ã€Œèƒ¸ãŒè»½ãä¸ŠãŒã‚‹ç¨‹åº¦ã€ (éæ›æ°—å³ç¦ï¼)",
                "åŒæœŸ: 30:2 (1å›1ç§’ã‹ã‘ã¦å…¥ã‚Œã‚‹)",
                "éåŒæœŸ(æŒ¿ç®¡å¾Œ): æˆäºº 10å›/åˆ† (6ç§’ã«1å›)",
                "ã€æŒ‡å°ã€‘ã€Œå¼·ãæŠ¼ã—ã™ããªã„ã€ã€ŒæŒ‡å…ˆã§ã‚¯ã‚·ãƒ¥ã£ã¨ã€"
            ]
        }
    ],
    "âš¡ ãƒ¢ãƒ‹ã‚¿ãƒ¼": [
        {
            "title": "é™¤ç´°å‹•ãƒ»å®‰å…¨ç¢ºèª",
            "points": [
                "é›»æ¥µä½ç½®: å³å‰èƒ¸éƒ¨ãƒ¼å·¦å´èƒ¸éƒ¨ (ã¾ãŸã¯å‰å¾Œ)",
                "å®‰å…¨ç¢ºèª: ã€Œç§ã‚ˆã—ã€ã‚ãªãŸã‚ˆã—ã€é…¸ç´ ã‚ˆã—ï¼ˆé›¢ã—ã¦ï¼‰ã€å…¨å“¡ã‚ˆã—ã€",
                "ã‚¸ã‚§ãƒ«: ãƒ‘ãƒ‰ãƒ«æ“¦ã‚Šåˆã‚ã›ç¦æ­¢ï¼ˆç«å‚·ãƒ»ã‚¹ãƒ‘ãƒ¼ã‚¯ã®åŸå› ï¼‰",
                "ã‚¨ãƒãƒ«ã‚®ãƒ¼: äºŒç›¸æ€§ 150-200J (åˆå›ã‹ã‚‰æœ€å¤§ã§ã‚‚å¯)"
            ]
        },
        {
            "title": "VF / ç„¡è„ˆæ€§VT",
            "points": [
                "ã‚·ãƒ§ãƒƒã‚¯: æœ€å„ªå…ˆã€‚å……é›»ä¸­ã¯åœ§è¿«ç¶™ç¶š",
                "è–¬å‰¤â‘ : ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ 1mg (3-5åˆ†ã”ã¨/2ãƒ«ãƒ¼ãƒ—ã«1å›)",
                "è–¬å‰¤â‘¡: ã‚¢ãƒŸã‚ªãƒ€ãƒ­ãƒ³ 300mg (2å›ç›®ã‚·ãƒ§ãƒƒã‚¯ä¸æˆåŠŸå¾Œ) â†’ 150mg",
                "ã€æŒ‡å°ã€‘ã€Œãƒªã‚ºãƒ ãƒã‚§ãƒƒã‚¯ã¯çŸ­ãï¼ãƒ‘ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ä¸è¦ï¼ã€"
            ]
        },
        {
            "title": "PEA / å¿ƒé™æ­¢",
            "points": [
                "ã‚·ãƒ§ãƒƒã‚¯é©å¿œãªã— â†’ å³åº§ã«CPRå†é–‹",
                "åŸå› æ¤œç´¢ (5H5T): ä½é…¸ç´ ã€å¾ªç’°è¡€æ¶²é‡æ¸›å°‘ã€Kç•°å¸¸ã€ä½“æ¸©...",
                "ãƒ•ãƒ©ãƒƒãƒˆãƒ©ã‚¤ãƒ³ç¢ºèª: èª˜å°ã‚’å¤‰ãˆã‚‹ã€æ„Ÿåº¦ã‚’ä¸Šã’ã‚‹",
                "ã€æŒ‡å°ã€‘ã€Œæ³¢å½¢ã ã‘ã§ãªãã€é›»æ¥µå¤–ã‚Œã‚‚ç–‘ã†ã€"
            ]
        }
    ],
    "ğŸ« æ°—é“": [
        {
            "title": "æ°—é“ç¢ºä¿ãƒ‡ãƒã‚¤ã‚¹",
            "points": [
                "i-gel: æŒ¿ç®¡å›°é›£ãƒ»çŸ­é ¸ã«æœ‰åŠ¹ã€‚é€£ç¶šä½¿ç”¨4æ™‚é–“ã¾ã§ã€‚",
                "LT (ãƒ©ãƒªãƒ³ã‚²ã‚¢ãƒ«ãƒãƒ¥ãƒ¼ãƒ–): ã€Œé£Ÿé“ã«å…¥ã‚Œã‚‹ã€å™¨å…·ã€‚",
                "æ°—ç®¡æŒ¿ç®¡: ç¢ºå®Ÿã ãŒä¸­æ–­ãƒªã‚¹ã‚¯å¤§ã€‚ãƒ“ãƒ‡ã‚ªå–‰é ­é¡æ¨å¥¨ã€‚",
                "ã€æŒ‡å°ã€‘ã€ŒCPRä¸­ã¯i-gelã§ååˆ†ã€‚ROSCã—ãŸã‚‰æŒ¿ç®¡ã¸ã€"
            ]
        },
        {
            "title": "ç¢ºèªã¨CO2ãƒ¢ãƒ‹ã‚¿ãƒ¼",
            "points": [
                "è´è¨º: å¿ƒçª©éƒ¨(è´ã“ãˆãªã„) â†’ ä¸¡è‚º(è´ã“ãˆã‚‹)",
                "Easy Cap (æ¯”è‰²æ³•): P-T-Yã®æ³•å‰‡",
                "ğŸŸª ç´« (Purple/Problem): é£Ÿé“ or å¿ƒåœæ­¢",
                "ğŸŸ« èŒ¶ (Tan/Think): ã€Œè¶³ã‚Šãªã„ã€CPRæ”¹å–„ãƒ»æ›æ°—éå¤š",
                "ğŸŸ¨ é»„ (Yellow/Yes): æŒ¿ç®¡æˆåŠŸãƒ»ROSC",
                "æ³¢å½¢ (å®šé‡çš„): å››è§’ã„æ³¢å½¢ãŒæœ€å¼·ã®è¨¼æ‹ "
            ]
        }
    ],
    "ğŸ‘¶ å°å…ãƒ»å¦Šå©¦": [
        {
            "title": "å°å…è˜‡ç”Ÿ (Pediatric)",
            "points": [
                "åŸå› : å‘¼å¸åŸæ€§ï¼ˆé…¸æ¬ ï¼‰ãŒ9å‰²",
                "æ¯”ç‡: åŒ»ç™‚è€…2äººãªã‚‰ã€Œ15 : 2ã€",
                "å¾è„ˆ: HR<60 + å¾ªç’°ä¸å…¨ã‚µã‚¤ãƒ³ ï¼ èƒ¸éª¨åœ§è¿«é–‹å§‹",
                "é«˜åº¦æ°—é“ç¢ºä¿å¾Œã®æ›æ°—: ã€Œ20ã€œ30å›/åˆ†ã€(2-3ç§’ã«1å›)",
                "ãƒ‘ãƒƒãƒ‰: æœªå°±å­¦å…ã¯å°å…ç”¨ãƒ¢ãƒ¼ãƒ‰ã€‚ç„¡ã‘ã‚Œã°æˆäººç”¨ã§ä»£ç”¨"
            ]
        },
        {
            "title": "å¦Šç”£å©¦è˜‡ç”Ÿ (Maternal)",
            "points": [
                "ä½“ä½: ã€Œç”¨æ‰‹å­å®®å·¦æ–¹åœ§æ’ã€ (ä»°è‡¥ä½ä½è¡€åœ§ã‚’é˜²ã)",
                "æ°—é“: æµ®è…«ãƒ»èª¤åš¥ãƒªã‚¹ã‚¯å¤§ã€‚ãƒãƒ¥ãƒ¼ãƒ–ã¯ç´°ã‚(6.0-6.5mm)",
                "PMCD (æ­»æˆ¦æœŸå¸ç‹åˆ‡é–‹): ã€Œ4åˆ†ã§é–‹å§‹ã€5åˆ†ã§å¨©å‡ºã€",
                "ã€æŒ‡å°ã€‘ã€Œæ¯ä½“ã‚’æ•‘ã†ã“ã¨ãŒèƒå…ã‚’æ•‘ã†å”¯ä¸€ã®é“ã€"
            ]
        }
    ],
    "ğŸš‘ æ•‘æ€¥ãƒ»ACS": [
        {
            "title": "ACS / PCIæº–å‚™",
            "points": [
                "12èª˜å°: ROSCå¾Œã€STä¸Šæ˜‡ã‚ã‚Œã°CAGç›´è¡Œ",
                "è„³å’ä¸­é™¤å¤–: å£é‹å‹•ç•°å¸¸ãŒæ”¯é…é ˜åŸŸã¨ä¸€è‡´ã—ãªã„å ´åˆãªã©",
                "æº–å‚™: å·¦ä¸Šè‚¢ãƒ«ãƒ¼ãƒˆã€é™¤ç´°å‹•ãƒ‘ãƒƒãƒ‰å‰å¾Œ(A-P)è²¼ä»˜",
                "ãƒ˜ãƒ‘ãƒªãƒ³: è§£é›¢å¦å®šã¾ã§æ‰“ãŸãªã„ï¼ˆé›»è©±ç¢ºèªæ¨å¥¨ï¼‰"
            ]
        },
        {
            "title": "æ•‘æ€¥éšŠé€£æºãƒ»MC",
            "points": [
                "ç‰¹å®šè¡Œç‚º: ãƒ«ãƒ¼ãƒˆã€è¼¸æ¶²ã€æŒ¿ç®¡ã€ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³(è¦æŒ‡ç¤º)",
                "åŒ…æ‹¬æŒ‡ç¤º: i-gel/LTã€è¡€ç³–æ¸¬å®šã€BVM",
                "ç”³ã—é€ã‚Š: ã€ŒCO2æ³¢å½¢å‡ºã¦ã¾ã™ã€ã¯ä¿¡é ¼åº¦å¤§"
            ]
        }
    ],
    "ğŸ¥ ROSCå¾Œ": [
        {
            "title": "ABCDEãƒãƒ³ãƒ‰ãƒ«",
            "points": [
                "A: ç¢ºå®Ÿãªæ°—é“ (æŒ¿ç®¡ã¸å…¥ã‚Œæ›¿ãˆæ¤œè¨)",
                "B: SpO2 94-98% (éé…¸ç´ å›é¿), PaCO2 35-45mmHg",
                "C: SBP>90mmHg, 12èª˜å°å¿ƒé›»å›³",
                "D: JCS/GCS, ç³å­”æ‰€è¦‹, CTæ¤œè¨",
                "E: TTM (33-36â„ƒ) ã®é©å¿œåˆ¤æ–­"
            ]
        },
        {
            "title": "è¡€ç³–ç®¡ç†",
            "points": [
                "ç›®æ¨™: 144-180 mg/dL (ã»ã©ã»ã©ç®¡ç†)",
                "ç¦å¿Œ: ä½è¡€ç³– (<70) ã¯è„³æ­»ã‚’æ‹›ã",
                "å³æ ¼ç®¡ç†(80-110)ã¯ç¾åœ¨ã¯å¦å®šã•ã‚Œã¦ã„ã‚‹"
            ]
        }
    ],
    "ğŸ¤ ãƒãƒ¼ãƒ ": [
        {
            "title": "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—",
            "points": [
                "å®£è¨€: ã€Œç§ãŒãƒªãƒ¼ãƒ€ãƒ¼ã‚’ã‚„ã‚Šã¾ã™ã€",
                "ä½ç½®: å…¨ä½“ãŒè¦‹ãˆã‚‹è¶³å…ƒãªã©",
                "è² è·åˆ†æ•£: è¨˜éŒ²ä¿‚ã€ã‚¿ã‚¤ãƒ ã‚­ãƒ¼ãƒ‘ãƒ¼ã€è–¬å‰¤ä¿‚",
                "Pre-emptive: ã€Œæ¬¡ã€2åˆ†çµŒã£ãŸã‚‰ãƒªã‚ºãƒ ç¢ºèªã—ã¾ã™ã€"
            ]
        },
        {
            "title": "ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã‚·ãƒƒãƒ—",
            "points": [
                "Closed Loop: ã€Œã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³1mgå…¥ã‚Œã¾ã™ã€â†’ã€Œå…¥ã‚Œã¾ã—ãŸã€",
                "Speak up: ã€Œç‚¹æ»´æ¼ã‚Œã¦ã¾ã›ã‚“ã‹ï¼Ÿã€ã€Œæ³¢å½¢å¤‰ã‚ã‚Šã¾ã—ãŸã€",
                "Constructive Intervention: ã€Œåœ§è¿«ã€å°‘ã—æµ…ããªã£ã¦ã¾ã™ã€"
            ]
        }
    ]
}

# ------------------------------------------------------------------
# 2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šãƒ»CSSãƒãƒƒã‚¯
# ------------------------------------------------------------------
def main():
    st.set_page_config(page_title="ICLS Instructor Guide", page_icon="ğŸš‘", layout="centered")

    # CSSã§ä½™ç™½ã‚’æ¥µé™ã¾ã§å‰Šã‚‹ & ã‚¹ãƒãƒ›ã§è¦‹ã‚„ã™ã
    st.markdown("""
        <style>
            /* å…¨ä½“ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å‰Šæ¸› */
            .block-container {
                padding-top: 1rem !important;
                padding-bottom: 2rem !important;
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ã®éè¡¨ç¤ºåŒ– */
            header {visibility: hidden;}
            footer {visibility: hidden;}
            
            /* ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
            .stTabs [data-baseweb="tab-list"] {
                gap: 4px;
                flex-wrap: wrap; /* ã‚¹ãƒãƒ›ã§æŠ˜ã‚Šè¿”ã™ */
            }
            .stTabs [data-baseweb="tab"] {
                height: 3rem;
                white-space: pre-wrap;
                background-color: #f8f9fa;
                border-radius: 4px 4px 0px 0px;
                padding: 0.5rem;
                font-size: 0.8rem;
                font-weight: bold;
            }
            .stTabs [aria-selected="true"] {
                background-color: #e3f2fd;
                border-bottom: 2px solid #2196f3;
            }
            
            /* Expanderï¼ˆé–‹é–‰ãƒªã‚¹ãƒˆï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
            .streamlit-expanderHeader {
                font-weight: 600;
                background-color: #ffffff;
                border: 1px solid #e0e0e0;
                border-radius: 5px;
                padding: 0.75rem !important;
                margin-top: 0.2rem !important;
            }
            .streamlit-expanderContent {
                border: 1px solid #e0e0e0;
                border-top: none;
                padding: 0.75rem !important;
                background-color: #fafafa;
            }
            
            /* ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
            p, li {
                font-size: 0.95rem !important;
                margin-bottom: 0.3rem !important;
                line-height: 1.4 !important;
                color: #333;
            }
        </style>
    """, unsafe_allow_html=True)

    st.title("ICLS Instructor Mate ğŸš‘")
    st.caption("ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼æŒ‡å°ç”¨ãƒã‚±ãƒƒãƒˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹")

    # ã‚¿ãƒ–ã®ä½œæˆ
    tabs = st.tabs(list(ICLS_CONTENT.keys()))

    # å„ã‚¿ãƒ–ã®ä¸­èº«ã‚’æç”»
    for i, category in enumerate(ICLS_CONTENT.keys()):
        with tabs[i]:
            for item in ICLS_CONTENT[category]:
                # åˆæœŸçŠ¶æ…‹ã§é–‹ã„ã¦ãŠãã‹ï¼Ÿï¼ˆexpanded=Falseã§é–‰ã˜ã‚‹ï¼‰
                with st.expander(f"ğŸ“Œ {item['title']}", expanded=False):
                    for point in item['points']:
                        # æŒ‡å°ãƒã‚¤ãƒ³ãƒˆã¯è‰²ã‚’å¤‰ãˆã‚‹ãªã©ã®è£…é£¾ã‚‚å¯èƒ½
                        if "ã€æŒ‡å°ã€‘" in point:
                            st.markdown(f"- **{point}**")
                        else:
                            st.markdown(f"- {point}")

if __name__ == "__main__":
    main()
